(()=>{"use strict";const e=(e="#header")=>{document.getElementById(e.slice(1)).scrollIntoView({block:"start",behavior:"smooth"})},t=(e,t)=>{const a=document.querySelector(".overlay");e.preventDefault(),a.style.display="block",t.style.display="block"},a=(e,t)=>{const a=document.querySelector(".overlay");e.preventDefault(),a.style.display="none",t.style.display="none"},n=e=>{(()=>{switch(e.name){case"fio":return e.value.trim().length<3||/^([^\s]*\s){3,}[^\s]*$/.test(e.value.trim().replace(/\s+/g," "))?(e.classList.add("error"),e.classList.remove("success"),!1):(e.classList.remove("error"),e.classList.add("success"),!0);case"phone":/^((8|\+7)[\- ]?)?(\(?\d{3}\)?[\- ]?)?[\d\- ]{7,10}$/.test(e.value.trim())?(e.classList.remove("error"),e.classList.add("success")):(e.classList.add("error"),e.classList.remove("success"))}})()},s=({formName:e,someElem:a=[]})=>{const s=document.querySelector(`form[name=${e}]`),o=document.getElementById("responseMessage"),r=o.querySelector(".modal-content");try{if(!s)throw new Error("Верните форму");s.addEventListener("submit",(e=>{e.preventDefault(),(()=>{const e=s.querySelectorAll("input"),t=new FormData(s),l={};var c;o.style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999;",t.forEach(((e,t)=>{l[t]="page"!==t||"subject"!==t?e:""===e?"не задано":e})),a.forEach((e=>{const t=document.getElementById(e.id);"input"===e.type&&""!==t.value&&(l[e.id]=t.value)})),(e=>{let t=!0;return e.forEach((e=>{n(e),e.classList.contains("error")&&(t=!1)})),t})(e)&&(c=l,fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then((e=>e.json()))).then((t=>{r.innerHTML="Спасибо! Наш менеджер с Вами свяжется!",e.forEach((e=>{e.value="",e.classList.remove("success")})),document.querySelectorAll(".calc-item").forEach((e=>e.value=""))})).catch((e=>{r.innerHTML="Ошибка...",console.log(e)}))})(),t(e,o)}))}catch(e){console.log(e.message)}};(()=>{const e=document.getElementById("header"),t=document.getElementById("navigation-fixed"),a=()=>{t.style.marginTop=window.scrollY+60>=e.offsetHeight?0:""};window.addEventListener("scroll",a),a()})(),(()=>{const t=document.getElementById("navbar-collapse-fixed"),a=document.getElementById("navbar-collapse"),n=e=>{e.classList.toggle("collapse")};document.addEventListener("click",(s=>{+window.innerWidth<992?(t.style="overflow-y: scroll;",s.target.closest("#navigation-fixed")&&(s.preventDefault(),s.target.closest(".navbar-toggle")&&n(t),"a"===s.target.localName&&(e(s.target.getAttribute("href")),n(t))),s.target.closest("#navigation")&&s.target.closest(".navbar-toggle")&&n(a)):s.target.closest("#navigation-fixed")&&"a"===s.target.localName&&(s.preventDefault(),e(s.target.getAttribute("href")))}))})(),(()=>{const t=document.querySelector(".smooth-scroll");t.addEventListener("click",(t=>{t.preventDefault(),e()}));const a=()=>{t.style.display=+window.innerHeight/2<+window.scrollY?"block":"none"};window.addEventListener("scroll",a),a()})(),(e=>{const t=document.querySelectorAll(".count-wrap");let a;const n=()=>{let n=(()=>{let t=new Date(e).getTime(),a=(new Date).getTime();if(a>t)return{timeRemaining:-1,hours:"00",minutes:"00",seconds:"00"};let n=(t-a)/1e3;return{timeRemaining:n,days:Math.floor(n/60/60/24),hours:Math.floor(n/60/60%24),minutes:Math.floor(n/60%60),seconds:Math.floor(n%60)}})();t.forEach((e=>{const[t,a,s,o]=e.children;n.days>0?t.children[1].textContent=(n.days+"").padStart(2,"0"):t.children[1].textContent="00",a.children[1].textContent=(n.hours+"").padStart(2,"0"),s.children[1].textContent=(n.minutes+"").padStart(2,"0"),o.children[1].textContent=(n.seconds+"").padStart(2,"0")})),n.timeRemaining<0&&clearInterval(a)};n(),a=setInterval((()=>{n()}),1e3)})("26 march 2022"),(()=>{const e=document.querySelector(".header-modal"),n=document.querySelector(".services-modal"),s=document.getElementById("responseMessage");let o=document.createElement("div");o.style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); z-index: 9999;",document.body.append(o),document.addEventListener("click",(r=>{(r.target.closest(".button")&&r.target.closest("#header")||r.target.closest("#navigation-fixed")&&r.target.closest(".top-btn"))&&t(r,e),r.target.closest(".service-button")&&t(r,n),(r.target.classList.contains("services-modal__close")||r.target.closest(".overlay"))&&(n.querySelectorAll("input").forEach((e=>{e.value=""})),a(r,n)),(r.target.classList.contains("header-modal__close")||r.target.closest(".overlay"))&&(e.querySelectorAll("input").forEach((e=>{e.value=""})),a(r,e)),r.target.closest(".sertificate-document")&&(t(r,o),o.classList.add("sertificate-document__open"),o.innerHTML=`<img src="./images/documents/original/document4.jpg" alt="document" style=" height: ${document.body.clientHeight}px;">`),r.target.closest(".overlay")&&document?.querySelector(".sertificate-document__open")&&(a(r,o),o.innerHTML=""),(r.target.classList.contains("fancyClose")||r.target.closest(".overlay"))&&a(r,s)}))})(),document.addEventListener("input",(e=>{switch(e.target.name){case"calc-input":e.target.value=e.target.value.replace(/[\D]+/,"");break;case"fio":if(e.target.value=e.target.value.replace(/[^а-яА-ЯёЁa-zA-Z\s]+/g,""),e.target.classList.contains("error")||e.target.classList.contains("success")){let t=document.querySelector(e.target);n(t)}break;case"phone":if(e.target.value=e.target.value.replace(/[^\d\-()+\s]+/g,""),e.target.classList.contains("error")||e.target.classList.contains("success")){let t=document.getElementById(e.target);n(t)}}})),document.addEventListener("blur",(e=>{if("input"===e.target.localName&&!e.target.classList.contains("calc-item"))switch(e.target.name){case"fio":e.target.value=e.target.value.trim().replace(/\s+/g," ");break;case"phone":e.target.value=e.target.value.replace(/([-()@_.,?!~*'])(?=[-()@_.,?!~*']*\1)/g,"")}}),!0),document.addEventListener("invalid",(e=>{e.preventDefault(),"input"===e.target.localName&&"calc-input"!==!e.target.name&&e.target.classList.add("error")}),!0),s({formName:"action-form",someElem:[{type:"input",id:"calc-total"}]}),s({formName:"action-form2",someElem:[{type:"input",id:"calc-total"}]}),s({formName:"application-form",someElem:[{type:"input",id:"calc-total"}]}),s({formName:"callback-form",someElem:[{type:"input",id:"calc-total"}]}),((e,t,a,n)=>{const s=document.getElementById(e);let o,r,l,c,i;const d=e=>e>=c.length?0:e<0?c.length-1:e,m=()=>{+window.innerWidth>=576?(l=3,i.style.justifyContent=""):(l=1,i.style.justifyContent="space-around")};i=s.querySelector("."+t),c=i.querySelectorAll("."+a),i.innerHTML="",null!==s?(o=c.length-1,m(),r=l,c.forEach(((e,t)=>{t<l&&i.append(e)})),s.addEventListener("click",(e=>{e.preventDefault(),e.target.closest(`.${n}--right`)&&(o=d(o+1),c[o].remove(),i.append(c[r]),r=d(r+1)),e.target.closest(`.${n}--left`)&&(r=d(r-1),c[r].remove(),i.prepend(c[o]),o=d(o-1))})),window.addEventListener("resize",(e=>{if(e.preventDefault(),m(),console.log(i.children.length,l),i.children.length>l)for(let e=0;e<i.children.length-l;e++)r=d(r-1),c[r].remove();else for(let e=0;e<l-i.children.length;e++)i.append(c[r]),r=d(r+1)}),!1)):console.log("error")})("benefits","benefits-wrap","benefits__item","benefits__arrow")})();